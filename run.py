"""
===============================================================================
                    ğŸš€ ç‹å¾€AI å…¬ä¼—å·å·¥ä½œæµ - ç»Ÿä¸€å…¥å£
===============================================================================
ç”¨æ³•ï¼š
    python run.py hunt     # è¿è¡Œé€‰é¢˜é›·è¾¾
    python run.py draft    # è¿è¡Œå†™ä½œæ™ºèƒ½ä½“
    python run.py format   # è¿è¡Œæ’ç‰ˆæ™ºèƒ½ä½“
    python run.py all      # è¿è¡Œå®Œæ•´æµç¨‹ï¼ˆéœ€äººå·¥ä»‹å…¥ï¼‰
===============================================================================
"""

import sys
import os

# ç¡®ä¿å¯ä»¥å¯¼å…¥ agents æ¨¡å—
sys.path.insert(0, os.path.dirname(os.path.abspath(__file__)))

def print_help():
    print("""
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘           ğŸš€ ç‹å¾€AI å…¬ä¼—å·å·¥ä½œæµ v2.0                        â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  ç”¨æ³•: python run.py <command>                               â•‘
â•‘                                                              â•‘
â•‘  å‘½ä»¤:                                                       â•‘
â•‘    hunt    - ğŸ¯ é€‰é¢˜é›·è¾¾ (æ‰«æå…¨ç½‘çƒ­ç‚¹ï¼Œæ¨èé€‰é¢˜)            â•‘
â•‘    draft   - âœï¸ å†™ä½œæ™ºèƒ½ä½“ (è¯»å–ç¬”è®°ï¼Œç”Ÿæˆåˆç¨¿)              â•‘
â•‘    format  - ğŸ¨ æ’ç‰ˆæ™ºèƒ½ä½“ (è½¬æ¢HTMLï¼Œå¤åˆ¶åˆ°å‰ªè´´æ¿)          â•‘
â•‘    all     - ğŸ”„ å®Œæ•´æµç¨‹ (ä¾æ¬¡è¿è¡Œï¼Œéœ€äººå·¥ä»‹å…¥)              â•‘
â•‘    help    - ğŸ“– æ˜¾ç¤ºå¸®åŠ©                                     â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  å·¥ä½œæµç¨‹:                                                   â•‘
â•‘    1. hunt  -> è·å–é€‰é¢˜                                      â•‘
â•‘    2. äººå·¥  -> NotebookLM ç ”ç©¶ï¼Œæ•´ç† research_notes.txt      â•‘
â•‘    3. draft -> ç”Ÿæˆ draft.md                                 â•‘
â•‘    4. äººå·¥  -> æ¶¦è‰²ï¼Œæˆªå›¾ï¼Œä¿å­˜ä¸º final.md                   â•‘
â•‘    5. format-> ç”Ÿæˆ HTMLï¼Œå¤åˆ¶åˆ°å…¬ä¼—å·å‘å¸ƒ                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
""")

def run_hunt():
    from agents.trend_hunter import main
    main()

def run_draft():
    from agents.drafter import main
    main()

def run_format():
    from agents.formatter import main
    main()

def run_all():
    from config import get_today_dir
    today = get_today_dir()
    
    print("\nğŸ”„ å¼€å§‹å®Œæ•´å·¥ä½œæµ...\n")
    print(f"ğŸ“ ä»Šæ—¥å·¥ä½œç›®å½•: {today}\n")
    print("="*60)
    print("ğŸ“¡ Phase 1: é€‰é¢˜é›·è¾¾")
    print("="*60)
    run_hunt()
    
    print("\n" + "="*60)
    print("â¸ï¸  äººå·¥ä»‹å…¥ç‚¹")
    print("="*60)
    print("è¯·å®Œæˆä»¥ä¸‹æ­¥éª¤åï¼ŒæŒ‰ Enter ç»§ç»­ï¼š")
    print(f"  1. æŸ¥çœ‹ {today}/topic_report_*.md é€‰æ‹©é€‰é¢˜")
    print("  2. å» NotebookLM åšæ·±åº¦ç ”ç©¶")
    print("  3. æ•´ç†ç¬”è®°åˆ° data/input/research_notes.txt")
    input("\næŒ‰ Enter ç»§ç»­...")
    
    print("\n" + "="*60)
    print("âœï¸ Phase 2: å†™ä½œæ™ºèƒ½ä½“")
    print("="*60)
    run_draft()
    
    print("\n" + "="*60)
    print("â¸ï¸  äººå·¥ä»‹å…¥ç‚¹")
    print("="*60)
    print("è¯·å®Œæˆä»¥ä¸‹æ­¥éª¤åï¼ŒæŒ‰ Enter ç»§ç»­ï¼š")
    print(f"  1. æ‰“å¼€ {today}/draft.md è¿›è¡Œæ¶¦è‰²")
    print("  2. æˆªå›¾æ›¿æ¢ TODO æ ‡è®°")
    print(f"  3. ä¿å­˜ä¸º {today}/final.md")
    input("\næŒ‰ Enter ç»§ç»­...")
    
    print("\n" + "="*60)
    print("ğŸ¨ Phase 3: æ’ç‰ˆæ™ºèƒ½ä½“")
    print("="*60)
    run_format()
    
    print("\n" + "="*60)
    print("ğŸ‰ å·¥ä½œæµå®Œæˆï¼")
    print("="*60)
    print("HTML å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œå»å…¬ä¼—å·åå°å‘å¸ƒå§ï¼")

def main():
    if len(sys.argv) < 2:
        print_help()
        return
    
    cmd = sys.argv[1].lower()
    
    if cmd == "hunt":
        run_hunt()
    elif cmd == "draft":
        run_draft()
    elif cmd == "format":
        run_format()
    elif cmd == "all":
        run_all()
    elif cmd == "help":
        print_help()
    else:
        print(f"âŒ æœªçŸ¥å‘½ä»¤: {cmd}")
        print_help()

if __name__ == "__main__":
    main()
